<div class="value-wrapper" {{action "expandComponent"}}>
  {{#if hasValue}}
    {{#if multiple}}
      {{#each value as |selectedValue|}}
        {{component multiValueComponent value=selectedValue onRemoveClick="onRemoveValueClick"}}
      {{/each}}
    {{else}}
      {{component singleValueComponent value=value}}
    {{/if}}
  {{else}}
    {{placeholder}}
  {{/if}}
</div>

{{#if isExpanded}}
  {{#ember-select-dropdown name=name visible=isExpanded willHideDropdown="willHideDropdown" as |optionsList|}}
    <div class="expanded-list">
      {{#if multiple}}
        <div class="multiple-value-selector">
          {{input placeholder=searchPlaceholder value=queryTerm class='ember-select-guru-search'}}
        </div>
      {{else}}
        <div class="single-value-search">
          {{input placeholder=searchPlaceholder value=queryTerm class='ember-select-guru-search'}}
        </div>
      {{/if}}
      <div class="options-wrapper">
        {{#if isPending}}
          {{component pendingComponent}}
        {{else}} {{#if hasFailed}}
          {{component failureComponent}}
        {{else}} {{#if hasOptions}}
          {{#each _options as |option index|}}
            {{component optionComponent option=option onClick=(action "onOptionClick") currentHighlight=currentHighlight index=index}}
          {{/each}}
        {{else}}
          {{component noOptionsComponent}}
        {{/if}}{{/if}}{{/if}}
      </div>
    </div>
  {{/ember-select-dropdown}}
{{/if}}
